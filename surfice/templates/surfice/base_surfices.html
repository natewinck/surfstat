{% extends "surfice/base.html" %}

{% block title %}Admin | Surfices{% endblock %}

{% load static %}
{% load humanize %}
{% load slugify %}

{% block body_class %}admin{% endblock %}


{% block nav %}
	{% include "surfice/admin_nav.html" %}
{% endblock %}


{% block heading %}
<div class="container">
	<div class="jumbotron jumbotron-admin">
		<h1>Update your Surfices</h1>
		<div class="container">
			<p>Surfice (n): the building block to the surfs that make up the ITS infrastructure</p>
		</div>
    </div>
</div>
{% endblock %}
    

{% block content %}
<!--Start Accordian Container-->
<div class="container">
    <div class="col-xs-12">
        <div class="col-xs-offset-0 col-xs-12">
			<div class="row">
				<h3 class="h3-admin">Create a Surfice</h3>
			</div>
			<form action="" method="post" role="form" id="new-surfice">
				{# To prevent cross-site forgery, include the following required tag #}
				{% csrf_token %}
				<div class="row">
					<div class="col-xs-6 ">
						<p>New Surfice Name</p>
						<input name="name" type="text" class="form-control" id="surfice-name-new" placeholder="Surfice Name">
						<p style="padding-top:10px">Initial Status of Surfice</p>
						<select name="status" class="form-control" id="surfice-surf-new">
							{% for status in statuses %}
							<option value="{{ status.id }}">{{ status.name }}</option>
							{% endfor %}
						</select>
						
						<p style="padding-top:10px">Assigned Surf</p>
						<select name="surf" class="form-control" id="surfice-surf-new">
							{% for surf in surfs %}
							<option value="{{ surf.id }}">{{ surf.name }}</option>
							{% endfor %}
						</select>
					</div>
					<div class="col-xs-6">
						<p>New Surfice Description</p>
						<textarea name="description" class="form-control" id="surfice-description-new" rows="8" placeholder="Update description here..."></textarea>
					 </div>
				</div>
				<div class="row">
					<div class="col-xs-offset-10 col-xs-1 button-accordian">
						<button type="submit" class="btn btn-success">Submit</button>
					</div>
				</div>
			</form>
        </div>
    </div>
</div>
      <div class="container">
            <div class="col-xs-12">
                <h2>Click on a Surfice to see Details</h2>
                <div class="col-xs-offset-0  col-xs-12">  
<!--Start Accordian-->   
                    <div class="panel-group" id="accordion">
						{% for surfice in surfices %}
                            <div class="panel panel-default">
<!--Start Panel {{ surfice.id }} of Accordian-->
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#accordion" data-target="#surfice-{{ surfice.id }}">{{ surfice.name }}</a>
                                    </h4>
                                </div>
                                <div id="surfice-{{ surfice.id }}" class="panel-collapse collapse">
									<div class="panel-body">
                                    <div class="col-xs-12">
<!--Row: Current Information on the Surf-->
                                        <div class="col-xs-4">
                                            <h4>Status</h4>
                                            {{ surfice.status.name }} <span class="glyphicon glyphicon-ok" ></span>
										</div>
                                        <div class="col-xs-4">
                                            <h4>Description</h4>
                                            <p>{{ surfice.description }}</p>
                                        </div>
                                        <div class="col-xs-4">
											<h4>Current Surf</h4>
											<p>{{ surfice.surf.name }}</p>
                                        </div>
									</div>
                                    <div class="col-xs-12">
										<hr class="divider-accordian">
                                    </div>
                                    <div class="row">
                                    	<h3 class="h3-admin">Update Your Surfice Status</h3>
                                    </div>
                                    <form type="ajax" action="ajax/set-status" method="post" role="form" id="status-surfice">
										{# To prevent cross-site forgery, include the following required tag #}
										{% csrf_token %}
										<input type="hidden" name="surfice" value="{{ surfice.id }}">
										<div class="col-xs-6">
											<p>Select Status</p>
											<select name="status" class="form-control" id="status-surfice-update">
												{% for status in statuses %}
												<option value="{{ status.id }}" {% if status == surfice.status %}selected="selected"{% endif %}>{{ status.name }}</option>
												{% endfor %}
											</select>
										</div>
                                        <div class="col-xs-6">
                                            <p>Status Description</p>
                                            <textarea name="description" class="form-control" rows="3" id="status-surfice-description-update" placeholder="Add your status description..."></textarea>
                                        </div>
										<div class="row">
											<div class="col-xs-offset-10 col-xs-1">
												<button type="submit" class="btn btn-success button-accordian">Submit</button>
											</div>
										</div>
                                    </form>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <hr class="divider-accordian">
                                        </div>
                                    </div>
                                    <div class="row">
										<h3 class="h3-admin">Edit Your Surfice</h3>
                                    </div>
                                    <form type="ajax" action="ajax/update-surfice" method="post" role="form" id="update-surfice">
										{# To prevent cross-site forgery, include the following required tag #}
										{% csrf_token %}
										<input type="hidden" name="surfice" value="{{ surfice.id }}">
										<div class="row">
											<div class="col-xs-6 ">
												<p>Update Surfice Name</p>
												<input name="name" type="text" class="form-control" id="update-surfice-name" value="{{ surfice.name }}" placeholder="Surfice Name">
												
												<p style="padding-top:10px">Assigned Surf</p>
												<select name="surf" class="form-control" id="surfice-surf-new">
													{% for surf in surfs %}
													
													<option value="{{ surf.id }}" {% if surf == surfice.surf %}selected="selected"{% endif %}>{{ surf.name }}</option>
													{% endfor %}
												</select>
											</div>
											<div class="col-xs-6">
												<p>Update Surfice Description</p>
												<textarea name="description" class="form-control" rows="3" placeholder="Update Description here..." id="update-surfice-description">{{ surfice.description }}</textarea>
											</div>
										</div>
										<div class="row">
											<div class="col-xs-offset-10 col-xs-1">
												 <button type="submit" class="btn btn-success">Submit</button>
											</div>
										</div>
									</form>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <hr class="divider-accordian">
                                        </div>
                                    </div>
                                    <div class="row">
										<div class="col-xs-12">
											<h3>Delete the Surfice</h3>
											<button type="button" class="btn btn-danger button-accordian" data-toggle="modal" data-target="#confirm-delete-surfice-{{ surfice.id }}">Delete</button>
										</div>
                                    </div>
                                </div>
                            	</div>
                        	</div>
                        
							<div class="modal fade" id="confirm-delete-surfice-{{ surfice.id }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h4 class="modal-title">Confirm Delete</h4>
										</div>
										<div class="modal-body">
											Are you sure you want to delete {{ surfice.name }}?
											All data related to this surfice including all events and dings assigned to it will be deleted!
										</div>
										<div class="modal-footer">
											<form action="" method="post">
												{# To prevent cross-site forgery, include the following required tag #}
												{% csrf_token %}
												<input type="hidden" name="surfice" value="{{ surfice.id }}">
												<input type="hidden" name="delete" value="1">
												<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
												<button type="submit" href="#" class="btn btn-danger danger">Delete</button>
											</form>
										</div>
									</div>
								</div>
							</div>
                        
                        
                        {% endfor %}
                    </div>

<hr class="featurette-divider">
<!-- /END THE FEATURETTES -->

{% endblock %}
